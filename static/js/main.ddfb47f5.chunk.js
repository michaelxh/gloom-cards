(this["webpackJsonpgloom-cards"]=this["webpackJsonpgloom-cards"]||[]).push([[0],{173:function(t,e,a){},174:function(t,e,a){},195:function(t,e,a){"use strict";a.r(e);var r=a(0),s=a.n(r),c=a(22),i=a.n(c),n=(a(69),a(23)),o=a.n(n),l=a(10);a(173);const d={hover:(t,e,a)=>{if(!a)return null;const r=e.getItem().index,s=t.index;if(r===s)return;const i=Object(c.findDOMNode)(a).getBoundingClientRect(),n=(i.bottom-i.top)/2,o=e.getSourceClientOffset().top-i.top;r<s&&o<n||r>s&&o>n||(t.moveCard(r,s),e.getItem().index=s)}};var g=Object(l.DropTarget)("card",d,(function(t,e){return{connectDropTarget:t.dropTarget()}}))(Object(l.DragSource)("card",{beginDrag:t=>({id:t.id,index:t.index})},(function(t,e){return{connectDragSource:t.dragSource(),isDragging:e.isDragging()}}))(({isDragging:t,connectDragSource:e,connectDropTarget:a,character:r,id:c,index:i,showToggle:n,visible:o,toggleCard:l,filter:d,setFilter:g})=>!(!n&&!o)&&e(a(s.a.createElement("div",{className:"card ".concat(o?"":"card--hidden"," ").concat(t?"card--dragged":"")},n&&s.a.createElement("label",{className:"cardToggle ".concat(o?"cardToggleChecked":"")},s.a.createElement("input",{type:"checkbox",checked:!!o,onClick:()=>l(i)})),s.a.createElement("button",{className:"play-button",onClick:()=>g(i,"played")},"P"),s.a.createElement("button",{className:"discard-button",onClick:()=>g(i,"discarded")},"D"),s.a.createElement("button",{className:"lost-button",onClick:()=>g(i,"lost")},"L"),s.a.createElement("div",{className:"filter-".concat(d)},s.a.createElement("img",{className:"".concat(d&&"opaque"),src:"cards/".concat(r,"-").concat(c,".jpg"),alt:""})))))));a(174);const h=({switchCharacter:t,toggleEditing:e,editing:a,cards:r,classes:c,character:i})=>s.a.createElement("div",null,s.a.createElement("div",{className:"character-panel"},s.a.createElement("select",{className:"character-picker",value:i||"",onChange:e=>t(e.target.value)},s.a.createElement("option",{value:"",disabled:!0},"Pick a character"),Object.keys(c).map((t,e)=>s.a.createElement("option",{value:t,key:e},t,c[t].locked?" (locked)":"")))),s.a.createElement("div",{className:"edit-cards-panel"},r.reduce((t,e)=>e.visible?t+1:t,0)," of ",r.length,s.a.createElement("span",{className:"edit-cards",onClick:e},a?"Done":"Edit available cards"))),m={brute:{total:29,starting:13},cragheart:{total:30,starting:14},mindthief:{starting:13,total:29},scoundrel:{total:28,starting:12},spellweaver:{total:27,starting:11},tinkerer:{total:31,starting:15},sun:{locked:!0,total:30,starting:14},"angry-face":{locked:!0,total:31,starting:15,order:[22,4,8,30,21,17,6,13,11,27,1,28,25,29,12,7,23,5,20,26,10,15,31,18,2,14,3,24,9,19,16]},triangle:{locked:!0,total:29,starting:13,order:[22,21,11,23,25,26,15,16,14,12,17,2,7,1,5,3,4,20,13,18,29,10,24,27,19,28,6,9,8]},"triple-spears":{locked:!0,total:28,starting:12,order:[21,13,27,15,12,10,4,11,6,7,26,20,17,2,5,25,28,9,19,24,3,16,23,18,14,8,22,1]},cthulhu:{locked:!0,total:30,starting:14,order:[28,13,18,22,4,26,8,12,17,11,20,9,29,6,27,19,25,10,24,16,1,30,23,5,2,3,21,14,15,7]},"lightning-bolt":{locked:!0,total:29,starting:13,order:[22,18,26,10,15,2,8,9,16,4,29,17,20,21,5,25,12,14,24,23,13,11,28,6,7,3,1,19,27]},"music-note":{locked:!0,total:28,starting:12,order:[16,7,21,27,2,25,24,20,11,23,28,15,22,4,9,6,8,10,12,13,18,17,14,1,26,5,3,19]},saw:{locked:!0,total:31,starting:15},"two-mini":{locked:!0,total:30,starting:14},circles:{locked:!0,total:29,starting:12},eclipse:{locked:!0,total:28,starting:12},diviner:{locked:!1,total:28,starting:12},demolitionist:{locked:!1,total:27,starting:12},"red-guard":{locked:!1,total:28,starting:13},voidwarden:{locked:!1,total:29,starting:14},hatchet:{locked:!1,total:28,starting:13}};class u extends r.Component{constructor(...t){super(...t),this.state={character:"",cards:[],editing:!1}}save(t,e){t||(t=this.state.character),e||(e=this.state.cards),window.localStorage.setItem(t,JSON.stringify(e))}init(t){if(!t)return!1;const e=m[t],a=e.total,r=e.starting,s=e.order,c=[...Array(a)].map((t,e)=>({id:s?s[e]:e+1,visible:r>e,filter:""}));this.save(t,c),this.setState({cards:c})}load(t){const e=window.localStorage.getItem(t);e?this.setState({cards:JSON.parse(e)}):this.init(t)}componentDidMount(){const t=window.localStorage.getItem("character")||null;this.setState({character:t}),this.load(t)}moveCard(t,e){const a=this.state.cards[t];this.setState(o()(this.state,{cards:{$splice:[[t,1],[e,0,a]]}}),()=>{this.save(this.state.character,this.state.cards)})}switchCharacter(t){this.setState({character:t}),this.load(t),window.localStorage.setItem("character",t)}toggleCard(t){this.setState(o()(this.state,{cards:{[t]:{visible:{$apply:t=>!t}}}}),this.save)}toggleEditing(){this.setState({editing:!this.state.editing})}setFilter(t,e){this.setState(o()(this.state,{cards:{[t]:{filter:{$apply:a=>this.state.cards[t].filter!==e?e:""}}}}),this.save)}render(){const t=this.state,e=t.character,a=t.cards;return s.a.createElement("div",{className:"App"},s.a.createElement(h,{switchCharacter:t=>this.switchCharacter(t),toggleEditing:()=>this.toggleEditing(),editing:this.state.editing,cards:a,classes:m,character:e}),s.a.createElement("div",{className:"card-container"},!this.state.character&&s.a.createElement("strong",{style:{fontSize:44,color:"#ddd"}},"Pick a character"),this.state.character&&0===this.state.cards.length&&s.a.createElement("span",null,"You don't have any cards selected"),this.state.cards.map((t,e)=>s.a.createElement(g,{key:t.id,character:this.state.character,id:t.id,index:e,moveCard:this.moveCard.bind(this),showToggle:this.state.editing,visible:t.visible,toggleCard:this.toggleCard.bind(this),filter:t.filter,setFilter:this.setFilter.bind(this)}))),s.a.createElement("div",{className:"footer"},"Got a question, bug, or suggestion? \xa0",s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/ksokhan/gloom-cards/issues"},"Submit a Github issue"),"."))}}var p=u;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=a(63),k=a.n(v);i.a.render(s.a.createElement(l.DragDropContextProvider,{backend:k.a},s.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})},64:function(t,e,a){t.exports=a(195)},69:function(t,e,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.ddfb47f5.chunk.js.map